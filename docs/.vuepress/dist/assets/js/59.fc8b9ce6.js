(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{407:function(t,e,s){"use strict";s.r(e);var n=s(41),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"engine-io-the-realtime-engine"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#engine-io-the-realtime-engine"}},[t._v("#")]),t._v(" Engine.IO: the realtime engine")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/socketio/engine.io/actions",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://github.com/socketio/engine.io/workflows/CI/badge.svg",alt:"Build Status"}}),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"http://badge.fury.io/js/engine.io",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://badge.fury.io/js/engine.io.svg",alt:"NPM version"}}),s("OutboundLink")],1)]),t._v(" "),s("p",[s("code",[t._v("Engine.IO")]),t._v(" is the implementation of transport-based\ncross-browser/cross-device bi-directional communication layer for\n"),s("a",{attrs:{href:"http://github.com/socketio/socket.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Socket.IO"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"how-to-use"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use"}},[t._v("#")]),t._v(" How to use")]),t._v(" "),s("h3",{attrs:{id:"server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#server"}},[t._v("#")]),t._v(" Server")]),t._v(" "),s("h4",{attrs:{id:"a-listening-on-a-port"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-listening-on-a-port"}},[t._v("#")]),t._v(" (A) Listening on a port")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" engine "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'engine.io'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf 8 string'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// binary data")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"b-intercepting-requests-for-a-http-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-intercepting-requests-for-a-http-server"}},[t._v("#")]),t._v(" (B) Intercepting requests for a http.Server")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" engine "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'engine.io'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" http "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("attach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'close'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"c-passing-in-requests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#c-passing-in-requests"}},[t._v("#")]),t._v(" (C) Passing in requests")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" engine "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'engine.io'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hi'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// â€¦")]),t._v("\nhttpServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'upgrade'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleUpgrade")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhttpServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"client"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#client"}},[t._v("#")]),t._v(" Client")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/path/to/engine.io.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" socket "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("eio"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Socket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ws://localhost/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'open'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'close'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("For more information on the client refer to the\n"),s("a",{attrs:{href:"http://github.com/learnboost/engine.io-client",target:"_blank",rel:"noopener noreferrer"}},[t._v("engine-client"),s("OutboundLink")],1),t._v(" repository.")]),t._v(" "),s("h2",{attrs:{id:"what-features-does-it-have"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-features-does-it-have"}},[t._v("#")]),t._v(" What features does it have?")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Maximum reliability")]),t._v(". Connections are established even in the presence of:\n"),s("ul",[s("li",[t._v("proxies and load balancers.")]),t._v(" "),s("li",[t._v("personal firewall and antivirus software.")]),t._v(" "),s("li",[t._v("for more information refer to "),s("strong",[t._v("Goals")]),t._v(" and "),s("strong",[t._v("Architecture")]),t._v(" sections")])])]),t._v(" "),s("li",[s("strong",[t._v("Minimal client size")]),t._v(" aided by:\n"),s("ul",[s("li",[t._v("lazy loading of flash transports.")]),t._v(" "),s("li",[t._v("lack of redundant transports.")])])]),t._v(" "),s("li",[s("strong",[t._v("Scalable")]),t._v(" "),s("ul",[s("li",[t._v("load balancer friendly")])])]),t._v(" "),s("li",[s("strong",[t._v("Future proof")])]),t._v(" "),s("li",[s("strong",[t._v("100% Node.JS core style")]),t._v(" "),s("ul",[s("li",[t._v("No API sugar (left for higher level projects)")]),t._v(" "),s("li",[t._v("Written in readable vanilla JavaScript")])])])]),t._v(" "),s("h2",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("h3",{attrs:{id:"server-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#server-2"}},[t._v("#")]),t._v(" Server")]),t._v(" "),s("hr"),s("br"),t._v(" "),s("h4",{attrs:{id:"top-level"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#top-level"}},[t._v("#")]),t._v(" Top-level")]),t._v(" "),s("p",[t._v("These are exposed by "),s("code",[t._v("require('engine.io')")]),t._v(":")]),t._v(" "),s("h5",{attrs:{id:"events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[t._v("#")]),t._v(" Events")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("flush")]),t._v(" "),s("ul",[s("li",[t._v("Called when a socket buffer is being flushed.")]),t._v(" "),s("li",[s("strong",[t._v("Arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Socket")]),t._v(": socket being flushed")]),t._v(" "),s("li",[s("code",[t._v("Array")]),t._v(": write buffer")])])])])]),t._v(" "),s("li",[s("code",[t._v("drain")]),t._v(" "),s("ul",[s("li",[t._v("Called when a socket buffer is drained")]),t._v(" "),s("li",[s("strong",[t._v("Arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Socket")]),t._v(": socket being flushed")])])])])])]),t._v(" "),s("h5",{attrs:{id:"properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties"}},[t._v("#")]),t._v(" Properties")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("protocol")]),t._v(" "),s("em",[t._v("(Number)")]),t._v(": protocol revision number")]),t._v(" "),s("li",[s("code",[t._v("Server")]),t._v(": Server class constructor")]),t._v(" "),s("li",[s("code",[t._v("Socket")]),t._v(": Socket class constructor")]),t._v(" "),s("li",[s("code",[t._v("Transport")]),t._v(" "),s("em",[t._v("(Function)")]),t._v(": transport constructor")]),t._v(" "),s("li",[s("code",[t._v("transports")]),t._v(" "),s("em",[t._v("(Object)")]),t._v(": map of available transports")])]),t._v(" "),s("h5",{attrs:{id:"methods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#methods"}},[t._v("#")]),t._v(" Methods")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("()")])]),t._v(" "),s("ul",[s("li",[t._v("Returns a new "),s("code",[t._v("Server")]),t._v(" instance. If the first argument is an "),s("code",[t._v("http.Server")]),t._v(" then the\nnew "),s("code",[t._v("Server")]),t._v(" instance will be attached to it. Otherwise, the arguments are passed\ndirectly to the "),s("code",[t._v("Server")]),t._v(" constructor.")]),t._v(" "),s("li",[s("strong",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("http.Server")]),t._v(": optional, server to attach to.")]),t._v(" "),s("li",[s("code",[t._v("Object")]),t._v(": optional, options object (see "),s("code",[t._v("Server#constructor")]),t._v(" api docs below)")])])])]),t._v(" "),s("p",[t._v("The following are identical ways to instantiate a server and then attach it.")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" httpServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// previously created with `http.createServer();` from node.js api.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// create a server first, and then attach")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" eioServer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'engine.io'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\neioServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("attach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("httpServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or call the module as a function to get `Server`")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" eioServer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'engine.io'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\neioServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("attach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("httpServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// immediately attach")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" eioServer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'engine.io'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("httpServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with custom options")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" eioServer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'engine.io'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("httpServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  maxHttpBufferSize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1e3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("listen")]),t._v(" "),s("ul",[s("li",[t._v("Creates an "),s("code",[t._v("http.Server")]),t._v(" which listens on the given port and attaches WS\nto it. It returns "),s("code",[t._v("501 Not Implemented")]),t._v(" for regular http requests.")]),t._v(" "),s("li",[s("strong",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Number")]),t._v(": port to listen on.")]),t._v(" "),s("li",[s("code",[t._v("Object")]),t._v(": optional, options object")]),t._v(" "),s("li",[s("code",[t._v("Function")]),t._v(": callback for "),s("code",[t._v("listen")]),t._v(".")])])]),t._v(" "),s("li",[s("strong",[t._v("Options")]),t._v(" "),s("ul",[s("li",[t._v("All options from "),s("code",[t._v("Server.attach")]),t._v(" method, documented below.")]),t._v(" "),s("li",[s("strong",[t._v("Additionally")]),t._v(" See Server "),s("code",[t._v("constructor")]),t._v(" below for options you can pass for creating the new Server")])])]),t._v(" "),s("li",[s("strong",[t._v("Returns")]),t._v(" "),s("code",[t._v("Server")])])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" engine "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'engine.io'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  pingTimeout"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  pingInterval"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("attach")]),t._v(" "),s("ul",[s("li",[t._v("Captures "),s("code",[t._v("upgrade")]),t._v(" requests for a "),s("code",[t._v("http.Server")]),t._v(". In other words, makes\na regular http.Server WebSocket-compatible.")]),t._v(" "),s("li",[s("strong",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("http.Server")]),t._v(": server to attach to.")]),t._v(" "),s("li",[s("code",[t._v("Object")]),t._v(": optional, options object")])])]),t._v(" "),s("li",[s("strong",[t._v("Options")]),t._v(" "),s("ul",[s("li",[t._v("All options from "),s("code",[t._v("Server.attach")]),t._v(" method, documented below.")]),t._v(" "),s("li",[s("strong",[t._v("Additionally")]),t._v(" See Server "),s("code",[t._v("constructor")]),t._v(" below for options you can pass for creating the new Server")])])]),t._v(" "),s("li",[s("strong",[t._v("Returns")]),t._v(" "),s("code",[t._v("Server")]),t._v(" a new Server instance.")])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" engine "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'engine.io'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" httpServer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("attach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("httpServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  wsEngine"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uws'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// requires having uws as dependency")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"server-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#server-3"}},[t._v("#")]),t._v(" Server")]),t._v(" "),s("p",[t._v("The main server/manager. "),s("em",[t._v("Inherits from EventEmitter")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"events-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#events-2"}},[t._v("#")]),t._v(" Events")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("connection")]),t._v(" "),s("ul",[s("li",[t._v("Fired when a new connection is established.")]),t._v(" "),s("li",[s("strong",[t._v("Arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Socket")]),t._v(": a Socket object")])])])])])]),t._v(" "),s("h5",{attrs:{id:"properties-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties-2"}},[t._v("#")]),t._v(" Properties")]),t._v(" "),s("p",[s("strong",[t._v("Important")]),t._v(": if you plan to use Engine.IO in a scalable way, please\nkeep in mind the properties below will only reflect the clients connected\nto a single process.")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("clients")]),t._v(" "),s("em",[t._v("(Object)")]),t._v(": hash of connected clients by id.")]),t._v(" "),s("li",[s("code",[t._v("clientsCount")]),t._v(" "),s("em",[t._v("(Number)")]),t._v(": number of connected clients.")])]),t._v(" "),s("h5",{attrs:{id:"methods-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#methods-2"}},[t._v("#")]),t._v(" Methods")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("constructor")]),t._v(" "),s("ul",[s("li",[t._v("Initializes the server")]),t._v(" "),s("li",[s("strong",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Object")]),t._v(": optional, options object")])])]),t._v(" "),s("li",[s("strong",[t._v("Options")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("pingTimeout")]),t._v(" ("),s("code",[t._v("Number")]),t._v("): how many ms without a pong packet to\nconsider the connection closed ("),s("code",[t._v("5000")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("pingInterval")]),t._v(" ("),s("code",[t._v("Number")]),t._v("): how many ms before sending a new ping\npacket ("),s("code",[t._v("25000")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("upgradeTimeout")]),t._v(" ("),s("code",[t._v("Number")]),t._v("): how many ms before an uncompleted transport upgrade is cancelled ("),s("code",[t._v("10000")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("maxHttpBufferSize")]),t._v(" ("),s("code",[t._v("Number")]),t._v("): how many bytes or characters a message\ncan be, before closing the session (to avoid DoS). Default\nvalue is "),s("code",[t._v("10E7")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("allowRequest")]),t._v(" ("),s("code",[t._v("Function")]),t._v("): A function that receives a given handshake\nor upgrade request as its first parameter, and can decide whether to\ncontinue or not. The second argument is a function that needs to be\ncalled with the decided information: "),s("code",[t._v("fn(err, success)")]),t._v(", where\n"),s("code",[t._v("success")]),t._v(" is a boolean value where false means that the request is\nrejected, and err is an error code.")]),t._v(" "),s("li",[s("code",[t._v("transports")]),t._v(" ("),s("code",[t._v("<Array> String")]),t._v("): transports to allow connections\nto ("),s("code",[t._v("['polling', 'websocket']")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("allowUpgrades")]),t._v(" ("),s("code",[t._v("Boolean")]),t._v("): whether to allow transport upgrades\n("),s("code",[t._v("true")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("perMessageDeflate")]),t._v(" ("),s("code",[t._v("Object|Boolean")]),t._v("): parameters of the WebSocket permessage-deflate extension\n(see "),s("a",{attrs:{href:"https://github.com/einaros/ws",target:"_blank",rel:"noopener noreferrer"}},[t._v("ws module"),s("OutboundLink")],1),t._v(" api docs). Set to "),s("code",[t._v("true")]),t._v(" to enable. ("),s("code",[t._v("false")]),t._v(")\n"),s("ul",[s("li",[s("code",[t._v("threshold")]),t._v(" ("),s("code",[t._v("Number")]),t._v("): data is compressed only if the byte size is above this value ("),s("code",[t._v("1024")]),t._v(")")])])]),t._v(" "),s("li",[s("code",[t._v("httpCompression")]),t._v(" ("),s("code",[t._v("Object|Boolean")]),t._v("): parameters of the http compression for the polling transports\n(see "),s("a",{attrs:{href:"http://nodejs.org/api/zlib.html#zlib_options",target:"_blank",rel:"noopener noreferrer"}},[t._v("zlib"),s("OutboundLink")],1),t._v(" api docs). Set to "),s("code",[t._v("false")]),t._v(" to disable. ("),s("code",[t._v("true")]),t._v(")\n"),s("ul",[s("li",[s("code",[t._v("threshold")]),t._v(" ("),s("code",[t._v("Number")]),t._v("): data is compressed only if the byte size is above this value ("),s("code",[t._v("1024")]),t._v(")")])])]),t._v(" "),s("li",[s("code",[t._v("cookie")]),t._v(" ("),s("code",[t._v("String|Boolean")]),t._v("): name of the HTTP cookie that\ncontains the client sid to send as part of handshake response\nheaders. Set to "),s("code",[t._v("false")]),t._v(" to not send one. ("),s("code",[t._v("io")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("cookiePath")]),t._v(" ("),s("code",[t._v("String|Boolean")]),t._v("): path of the above "),s("code",[t._v("cookie")]),t._v("\noption. If false, no path will be sent, which means browsers will only send the cookie on the engine.io attached path ("),s("code",[t._v("/engine.io")]),t._v(").\nSet false to not save io cookie on all requests. ("),s("code",[t._v("/")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("cookieHttpOnly")]),t._v(" ("),s("code",[t._v("Boolean")]),t._v("): If "),s("code",[t._v("true")]),t._v(" HttpOnly io cookie cannot be accessed by client-side APIs, such as JavaScript. ("),s("code",[t._v("true")]),t._v(") "),s("em",[t._v("This option has no effect if "),s("code",[t._v("cookie")]),t._v(" or "),s("code",[t._v("cookiePath")]),t._v(" is set to "),s("code",[t._v("false")]),t._v(".")])]),t._v(" "),s("li",[s("code",[t._v("wsEngine")]),t._v(" ("),s("code",[t._v("String")]),t._v("): what WebSocket server implementation to use. Specified module must conform to the "),s("code",[t._v("ws")]),t._v(" interface (see "),s("a",{attrs:{href:"https://github.com/websockets/ws/blob/master/doc/ws.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("ws module api docs"),s("OutboundLink")],1),t._v("). Default value is "),s("code",[t._v("ws")]),t._v(". An alternative c++ addon is also available by installing "),s("code",[t._v("uws")]),t._v(" module.")]),t._v(" "),s("li",[s("code",[t._v("initialPacket")]),t._v(" ("),s("code",[t._v("Object")]),t._v("): an optional packet which will be concatenated to the handshake packet emitted by Engine.IO.")])])])])]),t._v(" "),s("li",[s("code",[t._v("close")]),t._v(" "),s("ul",[s("li",[t._v("Closes all clients")]),t._v(" "),s("li",[s("strong",[t._v("Returns")]),t._v(" "),s("code",[t._v("Server")]),t._v(" for chaining")])])]),t._v(" "),s("li",[s("code",[t._v("handleRequest")]),t._v(" "),s("ul",[s("li",[t._v("Called internally when a "),s("code",[t._v("Engine")]),t._v(" request is intercepted.")]),t._v(" "),s("li",[s("strong",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("http.IncomingMessage")]),t._v(": a node request object")]),t._v(" "),s("li",[s("code",[t._v("http.ServerResponse")]),t._v(": a node response object")])])]),t._v(" "),s("li",[s("strong",[t._v("Returns")]),t._v(" "),s("code",[t._v("Server")]),t._v(" for chaining")])])]),t._v(" "),s("li",[s("code",[t._v("handleUpgrade")]),t._v(" "),s("ul",[s("li",[t._v("Called internally when a "),s("code",[t._v("Engine")]),t._v(" ws upgrade is intercepted.")]),t._v(" "),s("li",[s("strong",[t._v("Parameters")]),t._v(" (same as "),s("code",[t._v("upgrade")]),t._v(" event)\n"),s("ul",[s("li",[s("code",[t._v("http.IncomingMessage")]),t._v(": a node request object")]),t._v(" "),s("li",[s("code",[t._v("net.Stream")]),t._v(": TCP socket for the request")]),t._v(" "),s("li",[s("code",[t._v("Buffer")]),t._v(": legacy tail bytes")])])]),t._v(" "),s("li",[s("strong",[t._v("Returns")]),t._v(" "),s("code",[t._v("Server")]),t._v(" for chaining")])])]),t._v(" "),s("li",[s("code",[t._v("attach")]),t._v(" "),s("ul",[s("li",[t._v("Attach this Server instance to an "),s("code",[t._v("http.Server")])]),t._v(" "),s("li",[t._v("Captures "),s("code",[t._v("upgrade")]),t._v(" requests for a "),s("code",[t._v("http.Server")]),t._v(". In other words, makes\na regular http.Server WebSocket-compatible.")]),t._v(" "),s("li",[s("strong",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("http.Server")]),t._v(": server to attach to.")]),t._v(" "),s("li",[s("code",[t._v("Object")]),t._v(": optional, options object")])])]),t._v(" "),s("li",[s("strong",[t._v("Options")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" ("),s("code",[t._v("String")]),t._v("): name of the path to capture ("),s("code",[t._v("/engine.io")]),t._v(").")]),t._v(" "),s("li",[s("code",[t._v("destroyUpgrade")]),t._v(" ("),s("code",[t._v("Boolean")]),t._v("): destroy unhandled upgrade requests ("),s("code",[t._v("true")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("destroyUpgradeTimeout")]),t._v(" ("),s("code",[t._v("Number")]),t._v("): milliseconds after which unhandled requests are ended ("),s("code",[t._v("1000")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("handlePreflightRequest")]),t._v(" ("),s("code",[t._v("Boolean|Function")]),t._v("): whether to let engine.io handle the OPTIONS requests. You can also pass a custom function to handle the requests ("),s("code",[t._v("true")]),t._v(")")])])])])]),t._v(" "),s("li",[s("code",[t._v("generateId")]),t._v(" "),s("ul",[s("li",[t._v("Generate a socket id.")]),t._v(" "),s("li",[t._v("Overwrite this method to generate your custom socket id.")]),t._v(" "),s("li",[s("strong",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("http.IncomingMessage")]),t._v(": a node request object")])])]),t._v(" "),s("li",[s("strong",[t._v("Returns")]),t._v(" A socket id for connected client.")])])])]),t._v(" "),s("hr"),s("br"),t._v(" "),s("h4",{attrs:{id:"socket"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#socket"}},[t._v("#")]),t._v(" Socket")]),t._v(" "),s("p",[t._v("A representation of a client. "),s("em",[t._v("Inherits from EventEmitter")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"events-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#events-3"}},[t._v("#")]),t._v(" Events")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("close")]),t._v(" "),s("ul",[s("li",[t._v("Fired when the client is disconnected.")]),t._v(" "),s("li",[s("strong",[t._v("Arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("String")]),t._v(": reason for closing")]),t._v(" "),s("li",[s("code",[t._v("Object")]),t._v(": description object (optional)")])])])])]),t._v(" "),s("li",[s("code",[t._v("message")]),t._v(" "),s("ul",[s("li",[t._v("Fired when the client sends a message.")]),t._v(" "),s("li",[s("strong",[t._v("Arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("String")]),t._v(" or "),s("code",[t._v("Buffer")]),t._v(": Unicode string or Buffer with binary contents")])])])])]),t._v(" "),s("li",[s("code",[t._v("error")]),t._v(" "),s("ul",[s("li",[t._v("Fired when an error occurs.")]),t._v(" "),s("li",[s("strong",[t._v("Arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Error")]),t._v(": error object")])])])])]),t._v(" "),s("li",[s("code",[t._v("flush")]),t._v(" "),s("ul",[s("li",[t._v("Called when the write buffer is being flushed.")]),t._v(" "),s("li",[s("strong",[t._v("Arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Array")]),t._v(": write buffer")])])])])]),t._v(" "),s("li",[s("code",[t._v("drain")]),t._v(" "),s("ul",[s("li",[t._v("Called when the write buffer is drained")])])]),t._v(" "),s("li",[s("code",[t._v("packet")]),t._v(" "),s("ul",[s("li",[t._v("Called when a socket received a packet ("),s("code",[t._v("message")]),t._v(", "),s("code",[t._v("ping")]),t._v(")")]),t._v(" "),s("li",[s("strong",[t._v("Arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("type")]),t._v(": packet type")]),t._v(" "),s("li",[s("code",[t._v("data")]),t._v(": packet data (if type is message)")])])])])]),t._v(" "),s("li",[s("code",[t._v("packetCreate")]),t._v(" "),s("ul",[s("li",[t._v("Called before a socket sends a packet ("),s("code",[t._v("message")]),t._v(", "),s("code",[t._v("pong")]),t._v(")")]),t._v(" "),s("li",[s("strong",[t._v("Arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("type")]),t._v(": packet type")]),t._v(" "),s("li",[s("code",[t._v("data")]),t._v(": packet data (if type is message)")])])])])])]),t._v(" "),s("h5",{attrs:{id:"properties-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties-3"}},[t._v("#")]),t._v(" Properties")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("id")]),t._v(" "),s("em",[t._v("(String)")]),t._v(": unique identifier")]),t._v(" "),s("li",[s("code",[t._v("server")]),t._v(" "),s("em",[t._v("(Server)")]),t._v(": engine parent reference")]),t._v(" "),s("li",[s("code",[t._v("request")]),t._v(" "),s("em",[t._v("(http.IncomingMessage)")]),t._v(": request that originated the Socket")]),t._v(" "),s("li",[s("code",[t._v("upgraded")]),t._v(" "),s("em",[t._v("(Boolean)")]),t._v(": whether the transport has been upgraded")]),t._v(" "),s("li",[s("code",[t._v("readyState")]),t._v(" "),s("em",[t._v("(String)")]),t._v(": opening|open|closing|closed")]),t._v(" "),s("li",[s("code",[t._v("transport")]),t._v(" "),s("em",[t._v("(Transport)")]),t._v(": transport reference")])]),t._v(" "),s("h5",{attrs:{id:"methods-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#methods-3"}},[t._v("#")]),t._v(" Methods")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("send")]),t._v(":\n"),s("ul",[s("li",[t._v("Sends a message, performing "),s("code",[t._v("message = toString(arguments[0])")]),t._v(" unless\nsending binary data, which is sent as is.")]),t._v(" "),s("li",[s("strong",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("String")]),t._v(" |Â "),s("code",[t._v("Buffer")]),t._v(" | "),s("code",[t._v("ArrayBuffer")]),t._v(" | "),s("code",[t._v("ArrayBufferView")]),t._v(": a string or any object implementing "),s("code",[t._v("toString()")]),t._v(", with outgoing data, or a Buffer or ArrayBuffer with binary data. Also any ArrayBufferView can be sent as is.")]),t._v(" "),s("li",[s("code",[t._v("Object")]),t._v(": optional, options object")]),t._v(" "),s("li",[s("code",[t._v("Function")]),t._v(": optional, a callback executed when the message gets flushed out by the transport")])])]),t._v(" "),s("li",[s("strong",[t._v("Options")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("compress")]),t._v(" ("),s("code",[t._v("Boolean")]),t._v("): whether to compress sending data. This option might be ignored and forced to be "),s("code",[t._v("true")]),t._v(" when using polling. ("),s("code",[t._v("true")]),t._v(")")])])]),t._v(" "),s("li",[s("strong",[t._v("Returns")]),t._v(" "),s("code",[t._v("Socket")]),t._v(" for chaining")])])]),t._v(" "),s("li",[s("code",[t._v("close")]),t._v(" "),s("ul",[s("li",[t._v("Disconnects the client")]),t._v(" "),s("li",[s("strong",[t._v("Returns")]),t._v(" "),s("code",[t._v("Socket")]),t._v(" for chaining")])])])]),t._v(" "),s("h3",{attrs:{id:"client-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#client-2"}},[t._v("#")]),t._v(" Client")]),t._v(" "),s("hr"),s("br"),t._v(" "),s("p",[t._v("Exposed in the "),s("code",[t._v("eio")]),t._v(" global namespace (in the browser), or by\n"),s("code",[t._v("require('engine.io-client')")]),t._v(" (in Node.JS).")]),t._v(" "),s("p",[t._v("For the client API refer to the\n"),s("a",{attrs:{href:"http://github.com/learnboost/engine.io-client",target:"_blank",rel:"noopener noreferrer"}},[t._v("engine-client"),s("OutboundLink")],1),t._v(" repository.")]),t._v(" "),s("h2",{attrs:{id:"debug-logging"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#debug-logging"}},[t._v("#")]),t._v(" Debug / logging")]),t._v(" "),s("p",[t._v("Engine.IO is powered by "),s("a",{attrs:{href:"http://github.com/visionmedia/debug",target:"_blank",rel:"noopener noreferrer"}},[t._v("debug"),s("OutboundLink")],1),t._v(".\nIn order to see all the debug output, run your app with the environment variable\n"),s("code",[t._v("DEBUG")]),t._v(" including the desired scope.")]),t._v(" "),s("p",[t._v("To see the output from all of Engine.IO's debugging scopes you can use:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("DEBUG=engine* node myapp\n")])])]),s("h2",{attrs:{id:"transports"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transports"}},[t._v("#")]),t._v(" Transports")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("polling")]),t._v(": XHR / JSONP polling transport.")]),t._v(" "),s("li",[s("code",[t._v("websocket")]),t._v(": WebSocket transport.")])]),t._v(" "),s("h2",{attrs:{id:"plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[t._v("#")]),t._v(" Plugins")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/EugenDueck/engine.io-conflation",target:"_blank",rel:"noopener noreferrer"}},[t._v("engine.io-conflation"),s("OutboundLink")],1),t._v(": Makes "),s("strong",[t._v("conflation and aggregation")]),t._v(" of messages straightforward.")])]),t._v(" "),s("h2",{attrs:{id:"support"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#support"}},[t._v("#")]),t._v(" Support")]),t._v(" "),s("p",[t._v("The support channels for "),s("code",[t._v("engine.io")]),t._v(" are the same as "),s("code",[t._v("socket.io")]),t._v(":")]),t._v(" "),s("ul",[s("li",[t._v("irc.freenode.net "),s("strong",[t._v("#socket.io")])]),t._v(" "),s("li",[s("a",{attrs:{href:"http://groups.google.com/group/socket_io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Google Groups"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Website"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"development"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#development"}},[t._v("#")]),t._v(" Development")]),t._v(" "),s("p",[t._v("To contribute patches, run tests or benchmarks, make sure to clone the\nrepository:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git clone git://github.com/LearnBoost/engine.io.git\n")])])]),s("p",[t._v("Then:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd engine.io\nnpm install\n")])])]),s("h2",{attrs:{id:"tests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tests"}},[t._v("#")]),t._v(" Tests")]),t._v(" "),s("p",[t._v("Tests run with "),s("code",[t._v("npm test")]),t._v(". It runs the server tests that are aided by\nthe usage of "),s("code",[t._v("engine.io-client")]),t._v(".")]),t._v(" "),s("p",[t._v("Make sure "),s("code",[t._v("npm install")]),t._v(" is run first.")]),t._v(" "),s("h2",{attrs:{id:"goals"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#goals"}},[t._v("#")]),t._v(" Goals")]),t._v(" "),s("p",[t._v("The main goal of "),s("code",[t._v("Engine")]),t._v(' is ensuring the most reliable realtime communication.\nUnlike the previous Socket.IO core, it always establishes a long-polling\nconnection first, then tries to upgrade to better transports that are "tested" on\nthe side.')]),t._v(" "),s("p",[t._v("During the lifetime of the Socket.IO projects, we've found countless drawbacks\nto relying on "),s("code",[t._v("HTML5 WebSocket")]),t._v(" or "),s("code",[t._v("Flash Socket")]),t._v(" as the first connection\nmechanisms.")]),t._v(" "),s("p",[t._v("Both are clearly the "),s("em",[t._v("right way")]),t._v(" of establishing a bidirectional communication,\nwith HTML5 WebSocket being the way of the future. However, to answer most business\nneeds, alternative traditional HTTP 1.1 mechanisms are just as good as delivering\nthe same solution.")]),t._v(" "),s("p",[t._v("WebSocket based connections have two fundamental benefits:")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Better server performance")])])]),t._v(" "),s("ul",[s("li",[s("em",[t._v("A: Load balancers")]),s("br"),t._v("\nLoad balancing a long polling connection poses a serious architectural nightmare\nsince requests can come from any number of open sockets by the user agent, but\nthey all need to be routed to the process and computer that owns the "),s("code",[t._v("Engine")]),t._v("\nconnection. This negatively impacts RAM and CPU usage.")]),t._v(" "),s("li",[s("em",[t._v("B: Network traffic")]),s("br"),t._v("\nWebSocket is designed around the premise that each message frame has to be\nsurrounded by the least amount of data. In HTTP 1.1 transports, each message\nframe is surrounded by HTTP headers and chunked encoding frames. If you try to\nsend the message "),s("em",[t._v('"Hello world"')]),t._v(" with xhr-polling, the message ultimately\nbecomes larger than if you were to send it with WebSocket.")]),t._v(" "),s("li",[s("em",[t._v("C: Lightweight parser")]),s("br"),t._v("\nAs an effect of "),s("strong",[t._v("B")]),t._v(", the server has to do a lot more work to parse the network\ndata and figure out the message when traditional HTTP requests are used\n(as in long polling). This means that another advantage of WebSocket is\nless server CPU usage.")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[s("strong",[t._v("Better user experience")])]),t._v(" "),s("p",[t._v("Due to the reasons stated in point "),s("strong",[t._v("1")]),t._v(", the most important effect of being able\nto establish a WebSocket connection is raw data transfer speed, which translates\nin "),s("em",[t._v("some")]),t._v(" cases in better user experience.")]),t._v(" "),s("p",[t._v("Applications with heavy realtime interaction (such as games) will benefit greatly,\nwhereas applications like realtime chat (Gmail/Facebook), newsfeeds (Facebook) or\ntimelines (Twitter) will have negligible user experience improvements.")])])]),t._v(" "),s("p",[t._v("Having said this, attempting to establish a WebSocket connection directly so far has\nproven problematic:")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("Proxies")]),s("br"),t._v("\nMany corporate proxies block WebSocket traffic.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Personal firewall and antivirus software")]),s("br"),t._v("\nAs a result of our research, we've found that at least 3 personal security\napplications block WebSocket traffic.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Cloud application platforms")]),s("br"),t._v("\nPlatforms like Heroku or No.de have had trouble keeping up with the fast-paced\nnature of the evolution of the WebSocket protocol. Applications therefore end up\ninevitably using long polling, but the seamless installation experience of\nSocket.IO we strive for ("),s("em",[t._v('"require() it and it just works"')]),t._v(") disappears.")])])]),t._v(" "),s("p",[t._v("Some of these problems have solutions. In the case of proxies and personal programs,\nhowever, the solutions many times involve upgrading software. Experience has shown\nthat relying on client software upgrades to deliver a business solution is\nfruitless: the very existence of this project has to do with a fragmented panorama\nof user agent distribution, with clients connecting with latest versions of the most\nmodern user agents (Chrome, Firefox and Safari), but others with versions as low as\nIE 5.5.")]),t._v(" "),s("p",[t._v("From the user perspective, an unsuccessful WebSocket connection can translate in\nup to at least 10 seconds of waiting for the realtime application to begin\nexchanging data. This "),s("strong",[t._v("perceptively")]),t._v(" hurts user experience.")]),t._v(" "),s("p",[t._v("To summarize, "),s("strong",[t._v("Engine")]),t._v(" focuses on reliability and user experience first, marginal\npotential UX improvements and increased server performance second. "),s("code",[t._v("Engine")]),t._v(" is the\nresult of all the lessons learned with WebSocket in the wild.")]),t._v(" "),s("h2",{attrs:{id:"architecture"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#architecture"}},[t._v("#")]),t._v(" Architecture")]),t._v(" "),s("p",[t._v("The main premise of "),s("code",[t._v("Engine")]),t._v(", and the core of its existence, is the ability to\nswap transports on the fly. A connection starts as xhr-polling, but it can\nswitch to WebSocket.")]),t._v(" "),s("p",[t._v("The central problem this poses is: how do we switch transports without losing\nmessages?")]),t._v(" "),s("p",[s("code",[t._v("Engine")]),t._v(" only switches from polling to another transport in between polling\ncycles. Since the server closes the connection after a certain timeout when\nthere's no activity, and the polling transport implementation buffers messages\nin between connections, this ensures no message loss and optimal performance.")]),t._v(" "),s("p",[t._v("Another benefit of this design is that we workaround almost all the limitations\nof "),s("strong",[t._v("Flash Socket")]),t._v(", such as slow connection times, increased file size (we can\nsafely lazy load it without hurting user experience), etc.")]),t._v(" "),s("h2",{attrs:{id:"faq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),s("h3",{attrs:{id:"can-i-use-engine-without-socket-io"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#can-i-use-engine-without-socket-io"}},[t._v("#")]),t._v(" Can I use engine without Socket.IO ?")]),t._v(" "),s("p",[t._v("Absolutely. Although the recommended framework for building realtime applications\nis Socket.IO, since it provides fundamental features for real-world applications\nsuch as multiplexing, reconnection support, etc.")]),t._v(" "),s("p",[s("code",[t._v("Engine")]),t._v(" is to Socket.IO what Connect is to Express. An essential piece for building\nrealtime frameworks, but something you "),s("em",[t._v("probably")]),t._v(" won't be using for building\nactual applications.")]),t._v(" "),s("h3",{attrs:{id:"does-the-server-serve-the-client"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#does-the-server-serve-the-client"}},[t._v("#")]),t._v(" Does the server serve the client?")]),t._v(" "),s("p",[t._v("No. The main reason is that "),s("code",[t._v("Engine")]),t._v(" is meant to be bundled with frameworks.\nSocket.IO includes "),s("code",[t._v("Engine")]),t._v(", therefore serving two clients is not necessary. If\nyou use Socket.IO, including")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/socket.io/socket.io.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("has you covered.")]),t._v(" "),s("h3",{attrs:{id:"can-i-implement-engine-in-other-languages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#can-i-implement-engine-in-other-languages"}},[t._v("#")]),t._v(" Can I implement "),s("code",[t._v("Engine")]),t._v(" in other languages?")]),t._v(" "),s("p",[t._v("Absolutely. The "),s("a",{attrs:{href:"https://github.com/LearnBoost/engine.io-protocol",target:"_blank",rel:"noopener noreferrer"}},[t._v("engine.io-protocol"),s("OutboundLink")],1),t._v("\nrepository contains the most up to date description of the specification\nat all times, and the parser implementation in JavaScript.")]),t._v(" "),s("h2",{attrs:{id:"license"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#license"}},[t._v("#")]),t._v(" License")]),t._v(" "),s("p",[t._v("(The MIT License)")]),t._v(" "),s("p",[t._v("Copyright (c) 2014 Guillermo Rauch <guillermo@learnboost.com>")]),t._v(" "),s("p",[t._v("Permission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:")]),t._v(" "),s("p",[t._v("The above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.")]),t._v(" "),s("p",[t._v("THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.")])])}),[],!1,null,null,null);e.default=a.exports}}]);